{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useMemo, useContext, useEffect } from 'react';\nimport { cmdData } from '../__mocks__/crmDataMock';\nimport { setState } from '../store/actions';\nimport DashboardContext from '../contexts/generalContext';\nexport default function useGoogleAds(actualComponent) {\n  _s();\n  const [state, dispatch] = useContext(DashboardContext);\n  const {\n    filterCrm\n  } = state;\n  const CostAdquisitionData = useMemo(() => {\n    const data = filterCrm.reduce((acc, campaign) => {\n      const cost = campaign.costoAdquisicion;\n      if (cost <= 100) {\n        acc[\"<=100\"]++;\n      } else if (cost >= 101 && cost <= 250) {\n        acc[\"101-250\"]++;\n      } else if (cost >= 251 && cost <= 400) {\n        acc[\"251-400\"]++;\n      } else if (cost >= 401) {\n        acc[\"401+\"]++;\n      }\n      return acc;\n    }, {\n      \"<=100\": 0,\n      \"101-250\": 0,\n      \"251-400\": 0,\n      \"401+\": 0\n    });\n    let items = [];\n    Object.entries(data).forEach(([key, value]) => {\n      items.push({\n        value,\n        name: key\n      });\n    });\n    return {\n      title: {\n        text: 'Costo de adquisicion',\n        subtext: 'por lead',\n        left: 'center'\n      },\n      tooltip: {\n        trigger: 'item'\n      },\n      legend: {\n        orient: 'vertical',\n        left: 'left'\n      },\n      series: [{\n        name: 'Costo',\n        type: 'pie',\n        radius: '50%',\n        data: items,\n        emphasis: {\n          itemStyle: {\n            shadowBlur: 10,\n            shadowOffsetX: 0,\n            shadowColor: 'rgba(0, 0, 0, 0.5)'\n          }\n        }\n      }]\n    };\n  }, [filterCrm]);\n  const topcmdData = useMemo(() => {\n    const topCampaigns = filterCrm.sort((a, b) => b.participacion - a.participacion).slice(0, 5);\n    return {\n      title: {\n        text: '5 campa単as con mas costo de adquisicion'\n      },\n      tooltip: {},\n      xAxis: {\n        type: 'category',\n        data: topCampaigns.map(item => item.nombre),\n        axisLabel: {\n          rotate: 90,\n          margin: 1\n        }\n      },\n      yAxis: {\n        type: 'value'\n      },\n      series: {\n        type: 'bar',\n        data: topCampaigns.map(item => item.costoAdquisicion)\n      }\n    };\n  }, [filterCrm]);\n  const topValorVidaData = useMemo(() => {\n    const topCampaigns = filterCrm.sort((a, b) => b.valorDeVida - a.valorDeVida).slice(0, 5);\n    return {\n      title: {\n        text: '5 campa単as con mas gasto publicitario'\n      },\n      tooltip: {},\n      xAxis: {\n        max: 'dataMax'\n      },\n      yAxis: {\n        type: 'category',\n        data: topCampaigns.map(item => item.nombre),\n        inverse: true,\n        animationDuration: 300,\n        animationDurationUpdate: 300\n      },\n      series: [{\n        realtimeSort: true,\n        name: 'X',\n        type: 'bar',\n        data: topCampaigns.map(item => item.valorDeVida),\n        label: {\n          show: true,\n          position: 'right',\n          valueAnimation: true\n        }\n      }]\n    };\n  }, [filterCrm]);\n  useEffect(() => {\n    if (filterCrm.length) messageApi.open({\n      type: 'error',\n      content: 'No se encontraron coincidencias'\n    });\n  }, [filterCrm]);\n  useEffect(() => {\n    dispatch(setState({\n      metaCampaigns: cmdData.leads,\n      filterCrm: cmdData.leads\n    }));\n  }, []);\n  return {\n    CostAdquisitionData,\n    topcmdData,\n    filterCrm,\n    topValorVidaData\n  };\n}\n_s(useGoogleAds, \"4UqdTabpXkAqPYw/dS3krbd+PRk=\");","map":{"version":3,"names":["useMemo","useContext","useEffect","cmdData","setState","DashboardContext","useGoogleAds","actualComponent","_s","state","dispatch","filterCrm","CostAdquisitionData","data","reduce","acc","campaign","cost","costoAdquisicion","items","Object","entries","forEach","key","value","push","name","title","text","subtext","left","tooltip","trigger","legend","orient","series","type","radius","emphasis","itemStyle","shadowBlur","shadowOffsetX","shadowColor","topcmdData","topCampaigns","sort","a","b","participacion","slice","xAxis","map","item","nombre","axisLabel","rotate","margin","yAxis","topValorVidaData","valorDeVida","max","inverse","animationDuration","animationDurationUpdate","realtimeSort","label","show","position","valueAnimation","length","messageApi","open","content","metaCampaigns","leads"],"sources":["C:/Users/Admin/Documents/git/dashboard-admira/src/hooks/useCRM.js"],"sourcesContent":["import { useMemo, useContext, useEffect } from 'react';\r\nimport { cmdData } from '../__mocks__/crmDataMock';\r\nimport { setState } from '../store/actions';\r\nimport DashboardContext from '../contexts/generalContext';\r\n\r\nexport default function useGoogleAds(actualComponent) {\r\n    const [state, dispatch] = useContext(DashboardContext);\r\n    const { filterCrm } = state;\r\n\r\n    const CostAdquisitionData = useMemo(() => {\r\n        const data = filterCrm.reduce((acc, campaign) => {\r\n            const cost = campaign.costoAdquisicion;\r\n            if (cost <= 100) {\r\n                acc[\"<=100\"]++;\r\n            } else if (cost >= 101 && cost <= 250) {\r\n                acc[\"101-250\"]++;\r\n            } else if (cost >= 251 && cost <= 400) {\r\n                acc[\"251-400\"]++;\r\n            } else if (cost >= 401) {\r\n                acc[\"401+\"]++;\r\n            }\r\n    \r\n            return acc;\r\n        }, {\r\n            \"<=100\": 0,\r\n            \"101-250\": 0,\r\n            \"251-400\": 0,\r\n            \"401+\": 0\r\n        });\r\n        let items = [];\r\n        Object.entries(data).forEach(([key, value]) => {\r\n            items.push({\r\n                value,\r\n                name: key\r\n            });\r\n          })\r\n        return {\r\n            title: {\r\n                text: 'Costo de adquisicion',\r\n                subtext: 'por lead',\r\n                left: 'center'\r\n              },\r\n              tooltip: {\r\n                trigger: 'item'\r\n              },\r\n              legend: {\r\n                orient: 'vertical',\r\n                left: 'left'\r\n              },\r\n              series: [\r\n                {\r\n                  name: 'Costo',\r\n                  type: 'pie',\r\n                  radius: '50%',\r\n                  data: items,\r\n                  emphasis: {\r\n                    itemStyle: {\r\n                      shadowBlur: 10,\r\n                      shadowOffsetX: 0,\r\n                      shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                    }\r\n                  }\r\n                }\r\n              ]\r\n        }\r\n    }, [filterCrm]);\r\n\r\n    const topcmdData = useMemo(() => {\r\n        const topCampaigns = filterCrm\r\n        .sort((a, b) => b.participacion - a.participacion)  \r\n        .slice(0, 5);\r\n        return {\r\n            title: {\r\n                text: '5 campa単as con mas costo de adquisicion'\r\n            },\r\n            tooltip: {},\r\n            xAxis: {\r\n                type: 'category',\r\n                data: topCampaigns.map(item => item.nombre),\r\n                axisLabel: {\r\n                    rotate: 90,\r\n                    margin: 1\r\n                  }\r\n            },\r\n            yAxis: {\r\n                type: 'value'\r\n            },\r\n            series: {\r\n                type: 'bar',\r\n                data: topCampaigns.map(item => item.costoAdquisicion)\r\n            }\r\n        }\r\n    }, [filterCrm]);\r\n\r\n    const topValorVidaData = useMemo(() => {\r\n        const topCampaigns = filterCrm\r\n        .sort((a, b) => b.valorDeVida - a.valorDeVida)  \r\n        .slice(0, 5);\r\n        return {\r\n            title: {\r\n                text: '5 campa単as con mas gasto publicitario'\r\n            },\r\n            tooltip: {},\r\n            xAxis: {\r\n                max: 'dataMax'\r\n            },\r\n            yAxis: {\r\n                type: 'category',\r\n                data:  topCampaigns.map(item => item.nombre),\r\n                inverse: true,\r\n                animationDuration: 300,\r\n                animationDurationUpdate: 300,\r\n            },\r\n            series:[\r\n                {\r\n                    realtimeSort: true,\r\n                    name: 'X',\r\n                    type: 'bar',\r\n                    data: topCampaigns.map(item => item.valorDeVida),\r\n                    label: {\r\n                      show: true,\r\n                      position: 'right',\r\n                      valueAnimation: true\r\n                    }\r\n                  }\r\n            ]\r\n        }\r\n    }, [filterCrm]);\r\n\r\n    useEffect(() =>{\r\n        if(filterCrm.length)\r\n            messageApi.open({\r\n                type: 'error',\r\n                content: 'No se encontraron coincidencias',\r\n            });\r\n    }, [filterCrm]);\r\n    \r\n\r\n    useEffect(() => {\r\n        dispatch(setState({\r\n            metaCampaigns: cmdData.leads,\r\n            filterCrm: cmdData.leads\r\n        }));\r\n    }, [])\r\n    return {\r\n        CostAdquisitionData,\r\n        topcmdData,\r\n        filterCrm,\r\n        topValorVidaData,\r\n    }\r\n}\r\n"],"mappings":";AAAA,SAASA,OAAO,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AACtD,SAASC,OAAO,QAAQ,0BAA0B;AAClD,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,OAAOC,gBAAgB,MAAM,4BAA4B;AAEzD,eAAe,SAASC,YAAYA,CAACC,eAAe,EAAE;EAAAC,EAAA;EAClD,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGT,UAAU,CAACI,gBAAgB,CAAC;EACtD,MAAM;IAAEM;EAAU,CAAC,GAAGF,KAAK;EAE3B,MAAMG,mBAAmB,GAAGZ,OAAO,CAAC,MAAM;IACtC,MAAMa,IAAI,GAAGF,SAAS,CAACG,MAAM,CAAC,CAACC,GAAG,EAAEC,QAAQ,KAAK;MAC7C,MAAMC,IAAI,GAAGD,QAAQ,CAACE,gBAAgB;MACtC,IAAID,IAAI,IAAI,GAAG,EAAE;QACbF,GAAG,CAAC,OAAO,CAAC,EAAE;MAClB,CAAC,MAAM,IAAIE,IAAI,IAAI,GAAG,IAAIA,IAAI,IAAI,GAAG,EAAE;QACnCF,GAAG,CAAC,SAAS,CAAC,EAAE;MACpB,CAAC,MAAM,IAAIE,IAAI,IAAI,GAAG,IAAIA,IAAI,IAAI,GAAG,EAAE;QACnCF,GAAG,CAAC,SAAS,CAAC,EAAE;MACpB,CAAC,MAAM,IAAIE,IAAI,IAAI,GAAG,EAAE;QACpBF,GAAG,CAAC,MAAM,CAAC,EAAE;MACjB;MAEA,OAAOA,GAAG;IACd,CAAC,EAAE;MACC,OAAO,EAAE,CAAC;MACV,SAAS,EAAE,CAAC;MACZ,SAAS,EAAE,CAAC;MACZ,MAAM,EAAE;IACZ,CAAC,CAAC;IACF,IAAII,KAAK,GAAG,EAAE;IACdC,MAAM,CAACC,OAAO,CAACR,IAAI,CAAC,CAACS,OAAO,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAK;MAC3CL,KAAK,CAACM,IAAI,CAAC;QACPD,KAAK;QACLE,IAAI,EAAEH;MACV,CAAC,CAAC;IACJ,CAAC,CAAC;IACJ,OAAO;MACHI,KAAK,EAAE;QACHC,IAAI,EAAE,sBAAsB;QAC5BC,OAAO,EAAE,UAAU;QACnBC,IAAI,EAAE;MACR,CAAC;MACDC,OAAO,EAAE;QACPC,OAAO,EAAE;MACX,CAAC;MACDC,MAAM,EAAE;QACNC,MAAM,EAAE,UAAU;QAClBJ,IAAI,EAAE;MACR,CAAC;MACDK,MAAM,EAAE,CACN;QACET,IAAI,EAAE,OAAO;QACbU,IAAI,EAAE,KAAK;QACXC,MAAM,EAAE,KAAK;QACbxB,IAAI,EAAEM,KAAK;QACXmB,QAAQ,EAAE;UACRC,SAAS,EAAE;YACTC,UAAU,EAAE,EAAE;YACdC,aAAa,EAAE,CAAC;YAChBC,WAAW,EAAE;UACf;QACF;MACF,CAAC;IAET,CAAC;EACL,CAAC,EAAE,CAAC/B,SAAS,CAAC,CAAC;EAEf,MAAMgC,UAAU,GAAG3C,OAAO,CAAC,MAAM;IAC7B,MAAM4C,YAAY,GAAGjC,SAAS,CAC7BkC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAACC,aAAa,GAAGF,CAAC,CAACE,aAAa,CAAC,CACjDC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IACZ,OAAO;MACHtB,KAAK,EAAE;QACHC,IAAI,EAAE;MACV,CAAC;MACDG,OAAO,EAAE,CAAC,CAAC;MACXmB,KAAK,EAAE;QACHd,IAAI,EAAE,UAAU;QAChBvB,IAAI,EAAE+B,YAAY,CAACO,GAAG,CAACC,IAAI,IAAIA,IAAI,CAACC,MAAM,CAAC;QAC3CC,SAAS,EAAE;UACPC,MAAM,EAAE,EAAE;UACVC,MAAM,EAAE;QACV;MACN,CAAC;MACDC,KAAK,EAAE;QACHrB,IAAI,EAAE;MACV,CAAC;MACDD,MAAM,EAAE;QACJC,IAAI,EAAE,KAAK;QACXvB,IAAI,EAAE+B,YAAY,CAACO,GAAG,CAACC,IAAI,IAAIA,IAAI,CAAClC,gBAAgB;MACxD;IACJ,CAAC;EACL,CAAC,EAAE,CAACP,SAAS,CAAC,CAAC;EAEf,MAAM+C,gBAAgB,GAAG1D,OAAO,CAAC,MAAM;IACnC,MAAM4C,YAAY,GAAGjC,SAAS,CAC7BkC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAACY,WAAW,GAAGb,CAAC,CAACa,WAAW,CAAC,CAC7CV,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IACZ,OAAO;MACHtB,KAAK,EAAE;QACHC,IAAI,EAAE;MACV,CAAC;MACDG,OAAO,EAAE,CAAC,CAAC;MACXmB,KAAK,EAAE;QACHU,GAAG,EAAE;MACT,CAAC;MACDH,KAAK,EAAE;QACHrB,IAAI,EAAE,UAAU;QAChBvB,IAAI,EAAG+B,YAAY,CAACO,GAAG,CAACC,IAAI,IAAIA,IAAI,CAACC,MAAM,CAAC;QAC5CQ,OAAO,EAAE,IAAI;QACbC,iBAAiB,EAAE,GAAG;QACtBC,uBAAuB,EAAE;MAC7B,CAAC;MACD5B,MAAM,EAAC,CACH;QACI6B,YAAY,EAAE,IAAI;QAClBtC,IAAI,EAAE,GAAG;QACTU,IAAI,EAAE,KAAK;QACXvB,IAAI,EAAE+B,YAAY,CAACO,GAAG,CAACC,IAAI,IAAIA,IAAI,CAACO,WAAW,CAAC;QAChDM,KAAK,EAAE;UACLC,IAAI,EAAE,IAAI;UACVC,QAAQ,EAAE,OAAO;UACjBC,cAAc,EAAE;QAClB;MACF,CAAC;IAEX,CAAC;EACL,CAAC,EAAE,CAACzD,SAAS,CAAC,CAAC;EAEfT,SAAS,CAAC,MAAK;IACX,IAAGS,SAAS,CAAC0D,MAAM,EACfC,UAAU,CAACC,IAAI,CAAC;MACZnC,IAAI,EAAE,OAAO;MACboC,OAAO,EAAE;IACb,CAAC,CAAC;EACV,CAAC,EAAE,CAAC7D,SAAS,CAAC,CAAC;EAGfT,SAAS,CAAC,MAAM;IACZQ,QAAQ,CAACN,QAAQ,CAAC;MACdqE,aAAa,EAAEtE,OAAO,CAACuE,KAAK;MAC5B/D,SAAS,EAAER,OAAO,CAACuE;IACvB,CAAC,CAAC,CAAC;EACP,CAAC,EAAE,EAAE,CAAC;EACN,OAAO;IACH9D,mBAAmB;IACnB+B,UAAU;IACVhC,SAAS;IACT+C;EACJ,CAAC;AACL;AAAClD,EAAA,CAjJuBF,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}