{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useMemo, useEffect, useCallback, useContext } from 'react';\nimport DashboardContext from '../contexts/generalContext';\nimport { getNewReleases } from '../services/provider/tracks';\nimport { getAlbums } from '../services/provider/albums';\nimport { setState } from '../store/actions';\nexport default function useNewReleases({\n  messageApi\n}) {\n  _s();\n  const [state, dispatch] = useContext(DashboardContext);\n  const {\n    token,\n    newReleasesItems,\n    albumsNewReleases\n  } = state;\n  const newReleases = useMemo(() => {\n    let options = {\n      title: {\n        text: 'Nuevos lanzamientos Spotify'\n      },\n      tooltip: {},\n      legend: {\n        data: ['Duraci贸n por lanzamiento']\n      },\n      xAxis: {\n        data: [],\n        show: false\n      },\n      yAxis: {}\n    };\n    let data = [];\n    albumsNewReleases.forEach(item => {\n      var _item$artists;\n      let duration = 0;\n      const dataArtist = item === null || item === void 0 ? void 0 : (_item$artists = item.artists) === null || _item$artists === void 0 ? void 0 : _item$artists.map(artist => artist.name);\n      options.xAxis.data.push(`${item.name} - ${dataArtist.join('/')}`);\n      item.tracks.items.forEach(track => {\n        duration += Math.round(track.duration_ms / 60000);\n      });\n      data.push(duration);\n    });\n    options['series'] = [{\n      name: 'minutos',\n      type: 'bar',\n      data\n    }];\n    return options;\n  }, [newReleasesItems, albumsNewReleases, token]);\n  const getNewReleasesData = useCallback(async () => {\n    try {\n      if (token) {\n        const {\n          albums\n        } = await getNewReleases(token);\n        const idsTracks = albums.items.map(item => item.id).join();\n        const resultAlbums = await getAlbums(token, idsTracks);\n        dispatch(setState({\n          newReleasesItems: albums === null || albums === void 0 ? void 0 : albums.items,\n          albumsNewReleases: resultAlbums === null || resultAlbums === void 0 ? void 0 : resultAlbums.albums\n        }));\n      }\n    } catch (error) {\n      messageApi.open({\n        type: 'error',\n        content: 'Error al obtener la informaci贸n'\n      });\n    }\n  }, [token, messageApi]);\n  useEffect(() => {\n    getNewReleasesData();\n  }, [token, messageApi]);\n  return {\n    newReleases\n  };\n}\n_s(useNewReleases, \"fZUaLBYFacKnkW672PmXt/LL2+A=\");","map":{"version":3,"names":["useMemo","useEffect","useCallback","useContext","DashboardContext","getNewReleases","getAlbums","setState","useNewReleases","messageApi","_s","state","dispatch","token","newReleasesItems","albumsNewReleases","newReleases","options","title","text","tooltip","legend","data","xAxis","show","yAxis","forEach","item","_item$artists","duration","dataArtist","artists","map","artist","name","push","join","tracks","items","track","Math","round","duration_ms","type","getNewReleasesData","albums","idsTracks","id","resultAlbums","error","open","content"],"sources":["C:/Users/Admin/Documents/git/dashboard-admira/src/hooks/useNewReleases.js"],"sourcesContent":["import { useMemo, useEffect, useCallback, useContext } from 'react';\r\nimport DashboardContext from '../contexts/generalContext';\r\nimport { getNewReleases } from '../services/provider/tracks';\r\nimport { getAlbums } from '../services/provider/albums';\r\nimport { setState } from '../store/actions';\r\n\r\nexport default function useNewReleases({ messageApi }) {\r\n    const [state, dispatch] = useContext(DashboardContext);\r\n    const {\r\n        token,\r\n        newReleasesItems,\r\n        albumsNewReleases\r\n    } = state;\r\n\r\n    const newReleases = useMemo(() => {\r\n        let options = {\r\n            title: {\r\n                text: 'Nuevos lanzamientos Spotify'\r\n            },\r\n            tooltip: {},\r\n            legend: {\r\n                data: ['Duraci贸n por lanzamiento']\r\n            },\r\n            xAxis: {\r\n                data: [],\r\n                show: false\r\n            },\r\n            yAxis: {},\r\n        }\r\n        let data = [];\r\n        albumsNewReleases.forEach(item => {\r\n            let duration = 0;\r\n            const dataArtist = item?.artists?.map(artist => artist.name);\r\n            options.xAxis.data.push(`${item.name} - ${dataArtist.join('/')}`);\r\n            item.tracks.items.forEach(track => {\r\n                duration += Math.round(track.duration_ms / 60000);\r\n            });\r\n            data.push(duration);\r\n        });\r\n        options['series'] = [{\r\n            name: 'minutos',\r\n            type: 'bar',\r\n            data\r\n        }];\r\n        return options;\r\n    }, [newReleasesItems, albumsNewReleases, token]);\r\n\r\n    const getNewReleasesData = useCallback(async () => {\r\n        try {\r\n            if (token) {\r\n                const { albums } = await getNewReleases(token);\r\n                const idsTracks = albums.items.map(item => item.id).join();\r\n                const resultAlbums = await getAlbums(token, idsTracks);\r\n                dispatch(setState({\r\n                    newReleasesItems: albums?.items,\r\n                    albumsNewReleases: resultAlbums?.albums\r\n                }));\r\n            }\r\n        } catch (error) {\r\n            messageApi.open({\r\n                type: 'error',\r\n                content: 'Error al obtener la informaci贸n',\r\n            });\r\n        }\r\n    }, [token, messageApi]);\r\n\r\n    useEffect(() => {\r\n        getNewReleasesData();\r\n    }, [token, messageApi]);\r\n\r\n    return {\r\n        newReleases\r\n    }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}